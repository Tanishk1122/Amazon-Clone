<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <h1> Lesson 18 Exercises: backend, Promises & Async Await</h1>
        <script>
            /*
            const xhr =  new XMLHttpRequest();
            xhr.addEventListener('load', () => {
                console.log(xhr.response);
            })
            xhr.open('GET', 'https://supersimplebackend.dev/greeting');
            xhr.send();



            const fetchGreetings = fetch('https://supersimplebackend.dev/greeting');
            fetchGreetings.then((response) =>{
                return response.text();
            }).then((value) => {
                console.log(value);
            })

            async function name() {
                const value = await fetch('https://supersimplebackend.dev/greeting');
                const text = await value.text();;
                console.log(text);

            }
            name();
            */

            // async function Hello() {
            //     try{
            //         const request = await fetch('https://supersimplebackend.dev/greeting',{
            //             method:'POST', 
            //             headers:{
            //                 'Content-Type':'application/json',
            //             },
            //             body: JSON.stringify({
            //                 name: 'tanihsk Luckwal'
            //             })
            //         });

            //         const text = await request.text();
            //         console.log(text);
            //     } catch(error){
            //         console.log('Unexpected Error')
            //     }
            // }

            // Hello();


            async function exampleOne(){
                try{
                    const response = await fetch('https://supersimplebackend.dev', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    })

                    if(response.status >= 400){
                        // console.log('Hello')
                        throw response
                    }

                    const text = await response.text();
                    console.log(text);
                } catch(error) {
                    if(error.status === 404){
                        const errorMsg = await error.json();
                        console.log(errorMsg);
                    }else{
                        console.log('Network error . Please try again later')
                    }

                }

            }
            exampleOne();
            


        </script>
    </body>
</html>